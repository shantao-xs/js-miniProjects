<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Click and Drag</title>
  <link rel="stylesheet" href="style.css">
  <link rel="icon" href="https://fav.farm/ðŸ”¥" />
</head>
<body>
  <div class="items">
    <div class="item item1">01</div>
    <div class="item item2">02</div>
    <div class="item item3">03</div>
    <div class="item item4">04</div>
    <div class="item item5">05</div>
    <div class="item item6">06</div>
    <div class="item item7">07</div>
    <div class="item item8">08</div>
    <div class="item item9">09</div>
    <div class="item item10">10</div>
    <div class="item item11">11</div>
    <div class="item item12">12</div>
    <div class="item item13">13</div>
    <div class="item item14">14</div>
    <div class="item item15">15</div>
    <div class="item item16">16</div>
    <div class="item item17">17</div>
    <div class="item item18">18</div>
    <div class="item item19">19</div>
    <div class="item item20">20</div>
    <div class="item item21">21</div>
    <div class="item item22">22</div>
    <div class="item item23">23</div>
    <div class="item item24">24</div>
    <div class="item item25">25</div>
  </div>

<script>
  //åŠŸèƒ½ï¼šç‚¹å‡»slideæ¡†åŽç”¨é¼ æ ‡å¯ä»¥å·¦å³æ‹–åŠ¨ï¼Œslideæ¡†ä¼šæœ‰åŠ¨ç”»æ•ˆæžœ
  //1.ç›‘å¬slideæ¡†ï¼ˆ.itemsï¼‰ï¼Œç›‘å¬å››ç±»mouse event 2.è®°å½•åˆå§‹ç‚¹ä¸‹ï¼ˆéœ€åˆ¤æ–­æ˜¯å¦ç‚¹ä¸‹ï¼‰ä½ç½®ï¼Œè®°å½•æ‹–åŠ¨è·ç¦»ï¼Œæ¢ç®—åŽèµ‹å€¼ç»™scrollXä½¿å…¶è¿åŠ¨åˆ°çŽ°æœ‰ä½ç½®ä¸Š
  const slider = document.querySelector('.items');
  let isDown = false;
  let startLoc,curLoc,walk;
  let scrollLeft;
  slider.addEventListener('mousedown',(e)=>{
    //!! æ˜“é”™ï¼šè¿™é‡Œçš„thisæ˜¯è¢«ç›‘å¬äº‹ä»¶çš„å…ƒç´ .itemsï¼Œè€Œä¸æ˜¯sliderï¼ e.targetåˆ™æ˜¯itemsé‡Œé‚£ä¸ªè¢«è§¦å‘çš„å­å…ƒç´ 
    //å°½ç®¡thiså·²ç»ç»‘å®šåˆ°äº†sliderä¸Šï¼Œä¸ºäº†é¿å…æ··æ·†ï¼Œè¿˜æ˜¯ç›´æŽ¥ç”¨å·²ç»èµ‹å€¼çš„å˜é‡sliderè€Œä¸æ˜¯thisæ¥è®¿é—®ï¼ˆè¿™é‡Œæ²¡æ‡‚ï¼‰
    //e & e.targetï¼šeæ˜¯æŒ‡æ•´ä¸ªmousedown eventï¼Œe.targetæ˜¯å…·ä½“çš„å­å…ƒç´ ï¼ˆæ¯”å¦‚ç‚¹ä¸­äº†item2ï¼‰ï¼Œç”¨eå¯ä»¥èŽ·å–é¼ æ ‡ç›¸å¯¹äºŽæ•´ä¸ªæ–‡æ¡£çš„ä½ç½®ï¼ˆpageXYï¼‰ï¼Œç”¨e.targetèŽ·å–é¼ æ ‡ç›¸å¯¹äºŽè§†å£çš„ä½ç½®å°ºå¯¸ï¼Œå¯ä»¥ç”¨æ–¹æ³•getBoundingClientRect()å¿«é€ŸèŽ·å–ï¼Œä¹Ÿå¯ä»¥èŽ·å–é¼ æ ‡ç›¸å¯¹è§†å£çš„ä½ç½®clientXY
    //ç”¨eè¿˜æ˜¯e.targetï¼Ÿçœ‹ä½ æƒ³è¦æ”¹å˜å’Œç›‘æŽ§çš„å…ƒç´ åˆ°åº•æ˜¯æ•´ä½“ï¼ˆitemsè¿˜æ˜¯å½“å‰ä¸ªä½“å¦‚item2ï¼‰

    //è§†å£vsçª—å£ï¼šè§†å£æ˜¯æ˜¾ç¤ºç½‘é¡µå†…å®¹çš„æ•´ä¸ªå–ä½™ï¼Œçª—å£åŒ…æ‹¬åœ°å€æ æœç´¢æ ç­‰ï¼Œä¸€èˆ¬æƒ…å†µä¸‹æ°´å¹³ç»´åº¦ä¸Šï¼Œè§†å£å’Œçª—å£æ²¡å·®ï¼Œä½†æ˜¯ç¢°åˆ°ç¼©æ”¾ã€æ»šåŠ¨ç­‰è¡Œä¸ºæ˜¯ï¼Œæ˜Žç¡®è§†å£åœ¨çª—å£é‡Œçš„ç›¸å¯¹ä½ç½®è‡³å…³é‡è¦ï¼Œè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆstartLocè¦è¿™ä¹ˆè®¡ç®—

    //getBoundingClientRect() è¿”å›žçš„æ˜¯è¯¥DOMRectå¯¹è±¡æ‰€åœ¨çš„çŸ©å½¢çš„ä½ç½®å’Œå¤§å°ä¿¡æ¯ï¼ˆåœ¨è§†å£ä¸­ï¼‰
    isDown=true;
    slider.classList.add('active');
    startLoc = e.pageX - slider.offsetLeft; //ç¡®å®šé¼ æ ‡mouseçš„ç‚¹åœ¨sliderä¸­çš„ç›¸å¯¹ä½ç½®ï¼Œè€Œä¸æ˜¯åœ¨æ•´ä¸ªçª—å£ä¸­çš„ä½ç½®ï¼ˆè¿™æ„å‘³ç€éœ€è¦-sliderå¯¹äºŽçª—å£çš„ç›¸å¯¹ä½ç½®ï¼‰ //ä¸ºä»€ä¹ˆä¸æ˜¯e.target.offsetLeftï¼Ÿå› ä¸ºè¦è¿½è¸ªæ•´ä¸ªå…ƒç´ çš„åç§»é‡ï¼Œè€Œä¸æ˜¯å½“å‰å­å…ƒç´ çš„
    scrollLeft = slider.scrollLeft; //è®°å½•å½“å‰å·è½´è¢«ç§»åŠ¨çš„ä½ç½®
  });
  slider.addEventListener('mousemove',(e)=>{
    //æƒ³è¦æ»šåŠ¨sliderï¼ˆæ•´ä¸ªitemsï¼‰ï¼Œå°±å¯¹å®ƒèµ‹å€¼ï¼Œè€Œä¸æ˜¯å¯¹å­å…ƒç´ itemèµ‹å€¼
    e.preventDefault();//é˜²æ­¢è‡ªåŠ¨åˆ·æ–°
    if(!isDown) return;
    const curLoc = e.pageX - slider.offsetLeft;  //æ‹–åŠ¨åŽmouseçš„ç‚¹åœ¨sliderä¸­çš„ç›¸å¯¹ä½ç½®
    walk=(curLoc - startLoc)*2; //æ‹–åŠ¨å‰å’Œæ‹–åŠ¨åŽçš„åç§»é‡*å…¬å¼
    slider.scrollLeft = scrollLeft-walk;  //æ ¹æ®lastå·è½´è¢«ç§»åŠ¨ä½ç½®å’Œé¼ æ ‡walkè·ç¦»ï¼Œæ¥å†³å®šçŽ°åœ¨è¦ç§»åŠ¨å¤šå°‘
  });
  slider.addEventListener('mouseup',(e)=>{
    isDown=false;
    slider.classList.remove('active');
  });
  slider.addEventListener('mouseleave',(e)=>{
    
    isDown=false;
    slider.classList.remove('active');
});
</script>

  </body>
</html>
